<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body style="padding: 200px">
    test js run time
    <div></div>
    <button id="run">run</button>
  </body>
  <script type="module">
    import init, { evaluate } from '../pkg/web/skvm.js';

    init().then(() => {
      document.querySelector('#run').addEventListener('click', () => {
        const res = evaluate(
          `
        
        function testcc () {
          let bn = {a: 11n};
          let bns = JSON.stringify(bn);
          __sk_utils__.log(bns)
          let str = '{"a": 1n}'
          const a= JSON.parse(bns);
          __sk_utils__.log(a.a)
          __sk_utils__.log(a.a === 11)
          __sk_utils__.log(a.a === 11n)

        let num = Math.random()
        if (num > 0.5) {
            return 1
        } else {
            return 2
        }
    }
    testcc()
        
        `,
          1000n,
          new Uint8Array([]),
        );

        console.log(res);
      });
    });
  </script>
</html>
